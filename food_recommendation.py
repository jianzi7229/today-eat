import random
import time
import os
import logging
import pandas as pd

logging.basicConfig(level=logging.INFO, format='[%(levelname)s] %(message)s')

RECENT_FILE = 'recent_foods.txt'

class FoodOption:
    """é£Ÿç‰©é€‰é¡¹æ•°æ®ç»“æ„"""
    def __init__(self, name, min_price, max_price, health_rating, description, tags=None):
        self.name = name
        self.min_price = min_price
        self.max_price = max_price
        self.health_rating = health_rating
        self.description = description
        self.tags = tags or []

def get_food_options():
    """
    è·å–é£Ÿç‰©é€‰é¡¹åˆ—è¡¨ã€‚
    ä¼˜å…ˆä» foods.csv åŠ è½½ï¼Œå¦åˆ™ä½¿ç”¨å†…ç½®æ•°æ®ã€‚
    """
    csv_path = 'foods.csv'
    if os.path.exists(csv_path):
        logging.info('ä» foods.csv åŠ è½½é£Ÿç‰©æ•°æ®...')
        df = pd.read_csv(csv_path, encoding='utf-8')
        options = []
        for _, row in df.iterrows():
            options.append(FoodOption(
                name=row['èœå“å'],
                min_price=row['ä»·æ ¼'],
                max_price=row['ä»·æ ¼'],
                health_rating=row.get('å¥åº·åº¦', 5),
                description=row.get('å¤‡æ³¨', ''),
                tags=[str(row.get('é€‚åˆå¤©æ°”', ''))]
            ))
        return options
    else:
        logging.info('ä½¿ç”¨å†…ç½®é£Ÿç‰©æ•°æ®...')
        return [
            # ä¸­å¼ç‚’èœ/å¿«é¤ç±»
            FoodOption("é’æ¤’è‚‰ä¸", 22, 32, 7, "æ¸…æ·¡å¯å£ï¼Œè¥å…»å‡è¡¡", ["æ™´å¤©", "ç‚çƒ­", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("å®«ä¿é¸¡ä¸", 25, 35, 6, "ç»å…¸å·èœï¼Œè¤ç´ æ­é…", ["æ™´å¤©", "ç§‹å­£", "å†¬å­£"]),
            FoodOption("é±¼é¦™è‚‰ä¸", 25, 35, 6, "ç»å…¸å·èœï¼Œé€‚ä¸­æ­é…", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("ç³–é†‹é‡Œè„Š", 28, 38, 5, "å£æ„Ÿé…¸ç”œï¼Œé€‚é‡é£Ÿç”¨", ["æ™´å¤©", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("éº»å©†è±†è…", 20, 30, 7, "é«˜è›‹ç™½ä½è„‚ï¼Œå¼€èƒƒä¸‹é¥­", ["é˜´å¤©", "é›¨å¤©", "ç§‹å­£", "å†¬å­£"]),
            FoodOption("å›é”…è‚‰", 30, 40, 4, "é‡å£å‘³ï¼Œé«˜è„‚è‚ª", ["é˜´å¤©", "é›¨å¤©", "å†¬å­£"]),
            FoodOption("é»„ç„–é¸¡ç±³é¥­", 20, 30, 6, "è›‹ç™½è´¨æ­é…ç¢³æ°´ï¼Œç¨æ²¹è…»", ["é˜´å¤©", "é›¨å¤©", "ç§‹å­£", "å†¬å­£"]),
            FoodOption("é…¸èœé±¼", 35, 40, 8, "é…¸çˆ½å¯å£ï¼Œè›‹ç™½è´¨ä¸°å¯Œ", ["é˜´å¤©", "é›¨å¤©", "å†¬å­£"]),
            FoodOption("æ°´ç…®é±¼", 35, 40, 8, "å¯Œå«è›‹ç™½è´¨ï¼Œé€‚é‡è¾£å‘³å¼€èƒƒ", ["é˜´å¤©", "é›¨å¤©", "å†¬å­£"]),
            FoodOption("éº»è¾£é¦™é”…", 30, 40, 4, "å£æ„Ÿä¸°å¯Œï¼Œä½†æ²¹é‡è¾ƒå¤§", ["é˜´å¤©", "é›¨å¤©", "å†¬å­£"]),
            
            # å¿«é¤/è¥¿å¼
            FoodOption("ä¸‰æ˜æ²»", 20, 30, 6, "ä¾¿æºå¿«æ·ï¼Œè¥å…»å°šå¯", ["æ™´å¤©", "ç‚çƒ­", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("å¢¨è¥¿å“¥å·é¥¼", 25, 35, 6, "è”¬èœè‚‰ç±»å‡è¡¡æ­é…", ["æ™´å¤©", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("æ„å¤§åˆ©é¢", 30, 40, 5, "ç¢³æ°´ä¸ºä¸»ï¼Œé…±æ–™å†³å®šå¥åº·åº¦", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("ç‚¸é¸¡æ±‰å ¡", 25, 35, 3, "é«˜çƒ­é‡ï¼Œç¢³æ°´è›‹ç™½è´¨ä¸ºä¸»", ["é˜´å¤©", "é›¨å¤©", "ç§‹å­£", "å†¬å­£"]),
            FoodOption("æŠ«è¨", 30, 40, 4, "å¥¶é…ªæä¾›é’™è´¨ï¼Œä½†çƒ­é‡è¾ƒé«˜", ["é˜´å¤©", "é›¨å¤©", "å†¬å­£"]),
            FoodOption("è‚¯å¾·åŸº", 25, 35, 2, "é«˜çƒ­é‡ï¼Œé«˜è„‚è‚ª", ["é˜´å¤©", "é›¨å¤©", "å†¬å­£"]),
            FoodOption("éº¦å½“åŠ³", 25, 35, 2, "é«˜çƒ­é‡ï¼Œé«˜è„‚è‚ª", ["é˜´å¤©", "é›¨å¤©", "å†¬å­£"]),
            FoodOption("çƒ¤è‚‰æ‹¼ç›˜", 35, 40, 4, "é«˜è›‹ç™½ï¼Œä½†è¦æ³¨æ„è„‚è‚ª", ["é˜´å¤©", "é›¨å¤©", "å†¬å­£"]),
            
            # æ—¥éŸ©æ–™ç†
            FoodOption("å¯¿å¸", 30, 40, 7, "ç”Ÿé±¼ç‰‡å¯Œå«è›‹ç™½è´¨å’Œomega-3", ["æ™´å¤©", "ç‚çƒ­", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("æ‹‰é¢", 25, 35, 5, "æ±¤åº•è¥å…»ï¼Œé¢é£Ÿä¸ºä¸»", ["é˜´å¤©", "é›¨å¤©", "ç§‹å­£", "å†¬å­£"]),
            FoodOption("éŸ©å¼ç‚¸é¸¡", 30, 40, 3, "å£æ„Ÿæä½³ï¼Œä½†é«˜çƒ­é‡", ["é˜´å¤©", "é›¨å¤©", "å†¬å­£"]),
            FoodOption("çŸ³é”…æ‹Œé¥­", 30, 40, 8, "è¥å…»å‡è¡¡ï¼Œç§ç±»ä¸°å¯Œ", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("å¯¿å–œçƒ§", 35, 40, 7, "è‚‰ç±»è”¬èœæ­é…å‡è¡¡", ["é˜´å¤©", "é›¨å¤©", "å†¬å­£"]),
            FoodOption("å¤©å¦‡ç½—", 30, 40, 4, "æ²¹ç‚¸é£Ÿå“ï¼Œå¶å°”é£Ÿç”¨", ["æ™´å¤©", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("éŸ©å¼éƒ¨é˜Ÿé”…", 35, 40, 5, "å£æ„Ÿæµ“éƒï¼Œæ³¨æ„é’ å«é‡", ["é˜´å¤©", "é›¨å¤©", "å†¬å­£"]),
            FoodOption("å†·é¢", 25, 35, 7, "ä½çƒ­é‡ï¼Œæ¸…çˆ½å¼€èƒƒ", ["æ™´å¤©", "ç‚çƒ­", "å¤å­£"]),
            
            # ç«é”…/çƒ§çƒ¤
            FoodOption("ç«é”…å¤–å–", 35, 40, 5, "é£Ÿæå¤šæ ·ï¼Œå¯è¤å¯ç´ ", ["é˜´å¤©", "é›¨å¤©", "ç§‹å­£", "å†¬å­£"]),
            FoodOption("çƒ¤è‚‰", 35, 40, 4, "é«˜è›‹ç™½ï¼Œæ³¨æ„è„‚è‚ª", ["é˜´å¤©", "é›¨å¤©", "å†¬å­£"]),
            FoodOption("ä¸²ä¸²é¦™", 25, 35, 4, "å“ç§ä¸°å¯Œï¼Œæ²¹ç›åé«˜", ["é˜´å¤©", "é›¨å¤©", "ç§‹å­£", "å†¬å­£"]),
            FoodOption("éº»è¾£çƒ«", 20, 30, 5, "é£Ÿæå¤šæ ·ï¼Œä½†æ²¹ç›åé«˜", ["é˜´å¤©", "é›¨å¤©", "ç§‹å­£", "å†¬å­£"]),
            
            # é¢é£Ÿ/ç±³é¥­ç±»
            FoodOption("å…°å·æ‹‰é¢", 20, 30, 6, "é¢é£Ÿä¸ºä¸»ï¼Œæ±¤æ–™è¥å…»", ["é˜´å¤©", "é›¨å¤©", "ç§‹å­£", "å†¬å­£"]),
            FoodOption("ç‚¸é…±é¢", 20, 30, 5, "ä¼ ç»Ÿé¢é£Ÿï¼Œå£æ„Ÿæµ“éƒ", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("æ‰¬å·ç‚’é¥­", 20, 30, 6, "è›‹ç™½è´¨ç¢³æ°´å‡è¡¡", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("èºè›³ç²‰", 25, 35, 4, "é‡å£å‘³ï¼Œè¥å…»é€‚ä¸­", ["é˜´å¤©", "é›¨å¤©", "ç§‹å­£", "å†¬å­£"]),
            FoodOption("é…¸è¾£ç²‰", 20, 30, 4, "å¼€èƒƒçˆ½å£ï¼Œæ³¨æ„è¾£åº¦", ["é˜´å¤©", "é›¨å¤©", "ç§‹å­£", "å†¬å­£"]),
            FoodOption("é‡åº†å°é¢", 20, 30, 5, "é¢é£Ÿä¸ºä¸»ï¼Œè°ƒå‘³é€‚ä¸­", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("ç‰›è‚‰é¢", 25, 35, 7, "ä¼˜è´¨è›‹ç™½ï¼Œæ±¤æ–™æ»‹è¡¥", ["é˜´å¤©", "é›¨å¤©", "ç§‹å­£", "å†¬å­£"]),
            FoodOption("ç²¤å¼ç‚’é¥­", 25, 35, 6, "ç²®æ²¹é€‚ä¸­ï¼Œé…æ–™ä¸°å¯Œ", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            
            # å¥åº·è½»é£Ÿ
            FoodOption("å‡‰çš®", 20, 30, 7, "ä½è„‚è‚ªï¼Œç¢³æ°´é€‚ä¸­", ["æ™´å¤©", "ç‚çƒ­", "å¤å­£"]),
            FoodOption("æ²™æ‹‰", 25, 35, 9, "å¯Œå«è†³é£Ÿçº¤ç»´å’Œç»´ç”Ÿç´ ", ["æ™´å¤©", "ç‚çƒ­", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("æ°´æœæ", 20, 30, 9, "ç»´ç”Ÿç´ å……è¶³ï¼Œæ–°é²œå¥åº·", ["æ™´å¤©", "ç‚çƒ­", "å¤å­£"]),
            FoodOption("é¸¡èƒ¸è‚‰é¥­", 25, 35, 9, "é«˜è›‹ç™½ä½è„‚ï¼Œå¥èº«é¦–é€‰", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("è—œéº¦é¸¡è‚‰ç¢—", 30, 40, 9, "è¶…çº§é£Ÿç‰©ï¼Œè¥å…»å…¨é¢", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("è”¬èœæ±¤é¢", 20, 30, 8, "ä½çƒ­é‡ï¼Œè¥å…»å‡è¡¡", ["é˜´å¤©", "é›¨å¤©", "ç§‹å­£", "å†¬å­£"]),
            FoodOption("æ‚ç²®é¥­", 20, 30, 8, "è†³é£Ÿçº¤ç»´ä¸°å¯Œï¼Œè¥å…»å‡è¡¡", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("è±†è…å¥—é¤", 20, 30, 8, "æ¤ç‰©è›‹ç™½ï¼Œä½è„‚å¥åº·", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            
            # ç‰¹è‰²å°åƒ
            FoodOption("è‚ ç²‰", 20, 30, 6, "å£æ„Ÿæ»‘å«©ï¼Œæ—©é¤ä¼˜é€‰", ["æ™´å¤©", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("ç…é¥¼æœå­", 20, 30, 5, "ä¼ ç»Ÿå°åƒï¼Œæ—©é¤é¦–é€‰", ["æ™´å¤©", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("ç”Ÿç…åŒ…", 20, 30, 5, "å£æ„Ÿç‹¬ç‰¹ï¼Œé€‚é‡é£Ÿç”¨", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("é”…è´´", 20, 30, 5, "å¤–é…¥å†…è½¯ï¼Œç»å…¸å°åƒ", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("é¥ºå­", 25, 35, 6, "ä¼ ç»Ÿç¾é£Ÿï¼Œè¥å…»å¯æ§", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("é¦„é¥¨", 20, 30, 6, "æ¸…æ·¡è¥å…»ï¼Œå¼€èƒƒå¯å£", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            
            # æ–°å¢é£Ÿç‰© - ä¸­å¼ç‚’èœ
            FoodOption("è’œè“‰è¥¿å…°èŠ±", 20, 30, 8, "é«˜çº¤ç»´ï¼Œç»´ç”Ÿç´ ä¸°å¯Œ", ["æ™´å¤©", "ç‚çƒ­", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("çº¢çƒ§èŒ„å­", 20, 30, 6, "è½¯ç³¯å¯å£ï¼Œä¸‹é¥­ç¥å™¨", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("å¹²ç…¸è±†è§’", 20, 30, 7, "é¦™è¾£å¼€èƒƒï¼Œè¥å…»å‡è¡¡", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("é†‹æºœç™½èœ", 20, 30, 8, "æ¸…çˆ½è§£è…»ï¼Œç»´ç”Ÿç´ Cä¸°å¯Œ", ["æ™´å¤©", "ç‚çƒ­", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("è’œè‹—ç‚’è‚‰", 25, 35, 7, "è¤ç´ æ­é…ï¼Œè¥å…»ä¸°å¯Œ", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("éŸ­èœç‚’è›‹", 20, 30, 7, "è›‹ç™½è´¨ä¸°å¯Œï¼Œå¼€èƒƒä¸‹é¥­", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("è’œè‹”ç‚’è‚‰", 25, 35, 7, "æ¸…è„†çˆ½å£ï¼Œè¥å…»å‡è¡¡", ["æ™´å¤©", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("æ¸…ç‚’å°ç™½èœ", 20, 30, 8, "æ¸…æ·¡çˆ½å£ï¼Œç»´ç”Ÿç´ ä¸°å¯Œ", ["æ™´å¤©", "ç‚çƒ­", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("çº¢çƒ§è±†è…", 20, 30, 8, "æ¤ç‰©è›‹ç™½ï¼Œä½è„‚å¥åº·", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("è’œè“‰ç©ºå¿ƒèœ", 20, 30, 8, "æ¸…çƒ­è§£æš‘ï¼Œçº¤ç»´ä¸°å¯Œ", ["æ™´å¤©", "ç‚çƒ­", "å¤å­£"]),
            
            # æ–°å¢é£Ÿç‰© - è¥¿å¼ç®€é¤
            FoodOption("å‡¯æ’’æ²™æ‹‰", 25, 35, 8, "ç»å…¸è¥¿å¼æ²™æ‹‰ï¼Œè¥å…»å‡è¡¡", ["æ™´å¤©", "ç‚çƒ­", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("æ„å¼é€šå¿ƒç²‰", 25, 35, 6, "å£æ„Ÿä¸°å¯Œï¼Œé…±æ–™æµ“éƒ", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("æ³•å¼åå¸", 20, 30, 5, "é¦™ç”œå¯å£ï¼Œæ—©é¤ä¼˜é€‰", ["æ™´å¤©", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("ç¾å¼æ±‰å ¡", 25, 35, 4, "ç»å…¸ç¾å¼å¿«é¤", ["é˜´å¤©", "é›¨å¤©", "ç§‹å­£", "å†¬å­£"]),
            FoodOption("å¸Œè…Šæ²™æ‹‰", 25, 35, 9, "åœ°ä¸­æµ·é£å‘³ï¼Œå¥åº·ç¾å‘³", ["æ™´å¤©", "ç‚çƒ­", "å¤å­£"]),
            FoodOption("æ„å¼åƒå±‚é¢", 30, 40, 5, "å±‚æ¬¡ä¸°å¯Œï¼Œå£æ„Ÿæµ“éƒ", ["é˜´å¤©", "é›¨å¤©", "å†¬å­£"]),
            FoodOption("æ³•å¼å¯é¢‚", 20, 30, 4, "é…¥è„†å¯å£ï¼Œæ—©é¤é¦–é€‰", ["æ™´å¤©", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("ç¾å¼çƒ­ç‹—", 20, 30, 3, "ç»å…¸ç¾å¼å°åƒ", ["é˜´å¤©", "é›¨å¤©", "ç§‹å­£", "å†¬å­£"]),
            
            # æ–°å¢é£Ÿç‰© - æ—¥éŸ©æ–™ç†
            FoodOption("æ—¥å¼å’–å–±é¥­", 25, 35, 6, "æµ“éƒå’–å–±ï¼Œè¥å…»ä¸°å¯Œ", ["é˜´å¤©", "é›¨å¤©", "ç§‹å­£", "å†¬å­£"]),
            FoodOption("éŸ©å¼æ³¡èœæ±¤", 25, 35, 7, "é…¸è¾£å¼€èƒƒï¼Œç›Šç”ŸèŒä¸°å¯Œ", ["é˜´å¤©", "é›¨å¤©", "ç§‹å­£", "å†¬å­£"]),
            FoodOption("æ—¥å¼ä¹Œå†¬é¢", 25, 35, 6, "æ»‘å«©çˆ½å£ï¼Œæ±¤åº•é²œç¾", ["é˜´å¤©", "é›¨å¤©", "ç§‹å­£", "å†¬å­£"]),
            FoodOption("éŸ©å¼è¾£ç‚’å¹´ç³•", 25, 35, 5, "ç”œè¾£å¯å£ï¼Œå£æ„Ÿç‹¬ç‰¹", ["é˜´å¤©", "é›¨å¤©", "ç§‹å­£", "å†¬å­£"]),
            FoodOption("æ—¥å¼èŒ¶æ³¡é¥­", 20, 30, 7, "æ¸…æ·¡å…»ç”Ÿï¼Œæ—¥å¼ä¼ ç»Ÿ", ["æ™´å¤©", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("éŸ©å¼æµ·å¸¦æ±¤", 20, 30, 8, "è¥å…»ä¸°å¯Œï¼ŒéŸ©å¼ä¼ ç»Ÿ", ["é˜´å¤©", "é›¨å¤©", "ç§‹å­£", "å†¬å­£"]),
            FoodOption("æ—¥å¼äº²å­ä¸¼", 25, 35, 7, "é¸¡è‚‰é¸¡è›‹ï¼Œè¥å…»å‡è¡¡", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("éŸ©å¼æ‹Œé¥­", 25, 35, 8, "è”¬èœä¸°å¯Œï¼Œè¥å…»å…¨é¢", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            
            # æ–°å¢é£Ÿç‰© - ä¸œå—äºšæ–™ç†
            FoodOption("æ³°å¼ç‚’æ²³ç²‰", 25, 35, 6, "é…¸ç”œè¾£é¦™ï¼Œå£æ„Ÿä¸°å¯Œ", ["æ™´å¤©", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("è¶Šå—æ˜¥å·", 20, 30, 8, "æ¸…çˆ½å¯å£ï¼Œä½è„‚å¥åº·", ["æ™´å¤©", "ç‚çƒ­", "å¤å­£"]),
            FoodOption("æ–°åŠ å¡ç‚’ç±³ç²‰", 25, 35, 6, "æµ·é²œå‘³æµ“ï¼Œå£æ„Ÿä¸°å¯Œ", ["æ™´å¤©", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("é©¬æ¥è¥¿äºšå’–å–±", 25, 35, 6, "æ¤°é¦™æµ“éƒï¼Œå£æ„Ÿä¸°å¯Œ", ["é˜´å¤©", "é›¨å¤©", "ç§‹å­£", "å†¬å­£"]),
            FoodOption("æ³°å¼é’å’–å–±", 25, 35, 7, "æ¸…é¦™å¾®è¾£ï¼Œè¥å…»ä¸°å¯Œ", ["æ™´å¤©", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("è¶Šå—æ²³ç²‰", 25, 35, 7, "æ¸…æ·¡é²œç¾ï¼Œè¥å…»å‡è¡¡", ["æ™´å¤©", "æ˜¥å­£", "å¤å­£"]),
            
            # æ–°å¢é£Ÿç‰© - é¢é£Ÿç±»
            FoodOption("é˜³æ˜¥é¢", 20, 30, 6, "æ¸…æ·¡çˆ½å£ï¼Œä¼ ç»Ÿé¢é£Ÿ", ["æ™´å¤©", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("æ‹…æ‹…é¢", 25, 35, 5, "éº»è¾£é²œé¦™ï¼Œå·å¼ç»å…¸", ["é˜´å¤©", "é›¨å¤©", "ç§‹å­£", "å†¬å­£"]),
            FoodOption("çƒ­å¹²é¢", 20, 30, 5, "èŠéº»é¦™æµ“ï¼Œæ­¦æ±‰ç‰¹è‰²", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("åˆ€å‰Šé¢", 25, 35, 6, "å£æ„Ÿç‹¬ç‰¹ï¼Œå±±è¥¿ç‰¹è‰²", ["é˜´å¤©", "é›¨å¤©", "ç§‹å­£", "å†¬å­£"]),
            FoodOption("ç‚¸é…±é¢", 20, 30, 5, "ä¼ ç»Ÿé¢é£Ÿï¼Œå£æ„Ÿæµ“éƒ", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("è‡Šå­é¢", 25, 35, 6, "é…æ–™ä¸°å¯Œï¼Œé™•è¥¿ç‰¹è‰²", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            
            # æ–°å¢é£Ÿç‰© - ç±³é¥­ç±»
            FoodOption("è›‹ç‚’é¥­", 20, 30, 6, "ç»å…¸ç‚’é¥­ï¼Œç®€å•ç¾å‘³", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("æ‰¬å·ç‚’é¥­", 20, 30, 6, "è›‹ç™½è´¨ç¢³æ°´å‡è¡¡", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("å’–å–±ç‚’é¥­", 25, 35, 5, "å’–å–±é¦™æµ“ï¼Œå£æ„Ÿä¸°å¯Œ", ["é˜´å¤©", "é›¨å¤©", "ç§‹å­£", "å†¬å­£"]),
            FoodOption("è èç‚’é¥­", 25, 35, 6, "é…¸ç”œå¯å£ï¼Œè¥å…»ä¸°å¯Œ", ["æ™´å¤©", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("æµ·é²œç‚’é¥­", 30, 40, 7, "æµ·é²œé²œç¾ï¼Œè¥å…»ä¸°å¯Œ", ["æ™´å¤©", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("é¸¡è‚‰ç‚’é¥­", 25, 35, 7, "è›‹ç™½è´¨ä¸°å¯Œï¼Œè¥å…»å‡è¡¡", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            
            # æ–°å¢é£Ÿç‰© - æ±¤ç±»
            FoodOption("ç´«èœè›‹èŠ±æ±¤", 20, 30, 7, "æ¸…æ·¡é²œç¾ï¼Œè¥å…»ä¸°å¯Œ", ["æ™´å¤©", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("ç•ªèŒ„è›‹æ±¤", 20, 30, 8, "ç»´ç”Ÿç´ ä¸°å¯Œï¼Œå¼€èƒƒçˆ½å£", ["æ™´å¤©", "ç‚çƒ­", "å¤å­£"]),
            FoodOption("å†¬ç“œæ’éª¨æ±¤", 25, 35, 8, "æ¸…çƒ­è§£æš‘ï¼Œè¥å…»ä¸°å¯Œ", ["æ™´å¤©", "ç‚çƒ­", "å¤å­£"]),
            FoodOption("ç‰ç±³æ’éª¨æ±¤", 25, 35, 8, "é¦™ç”œå¯å£ï¼Œè¥å…»ä¸°å¯Œ", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("èåœæ’éª¨æ±¤", 25, 35, 8, "æ»‹è¡¥å…»ç”Ÿï¼Œå†¬å­£é¦–é€‰", ["é˜´å¤©", "é›¨å¤©", "å†¬å­£"]),
            FoodOption("è²è—•æ’éª¨æ±¤", 25, 35, 8, "æ»‹è¡¥å…»ç”Ÿï¼Œç§‹å­£ä½³å“", ["é˜´å¤©", "é›¨å¤©", "ç§‹å­£"]),
            
            # æ–°å¢é£Ÿç‰© - å¥åº·è½»é£Ÿ
            FoodOption("è—œéº¦æ²™æ‹‰", 25, 35, 9, "è¶…çº§é£Ÿç‰©ï¼Œè¥å…»å…¨é¢", ["æ™´å¤©", "ç‚çƒ­", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("é¸¡èƒ¸è‚‰æ²™æ‹‰", 25, 35, 9, "é«˜è›‹ç™½ä½è„‚ï¼Œå¥èº«é¦–é€‰", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("ä¸‰æ–‡é±¼æ²™æ‹‰", 30, 40, 9, "omega-3ä¸°å¯Œï¼Œè¥å…»å…¨é¢", ["æ™´å¤©", "ç‚çƒ­", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("ç‰›æ²¹æœæ²™æ‹‰", 25, 35, 9, "å¥åº·è„‚è‚ªï¼Œè¥å…»ä¸°å¯Œ", ["æ™´å¤©", "ç‚çƒ­", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("å¸Œè…Šé…¸å¥¶", 20, 30, 9, "è›‹ç™½è´¨ä¸°å¯Œï¼Œç›Šç”ŸèŒ", ["æ™´å¤©", "ç‚çƒ­", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("ç‡•éº¦ç²¥", 20, 30, 9, "è†³é£Ÿçº¤ç»´ä¸°å¯Œï¼Œæ—©é¤é¦–é€‰", ["é˜´å¤©", "é›¨å¤©", "ç§‹å­£", "å†¬å­£"]),
            
            # æ–°å¢é£Ÿç‰© - ç‰¹è‰²å°åƒ
            FoodOption("å°ç¬¼åŒ…", 25, 35, 6, "æ±¤æ±ä¸°å¯Œï¼Œä¸Šæµ·ç‰¹è‰²", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("çŒæ±¤åŒ…", 25, 35, 6, "æ±¤æ±æµ“éƒï¼Œå£æ„Ÿç‹¬ç‰¹", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("çƒ§å–", 20, 30, 6, "ç³¯ç±³é¦™æµ“ï¼Œå¹¿å¼ç‰¹è‰²", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("å‰çƒ§åŒ…", 20, 30, 5, "ç”œå’¸é€‚ä¸­ï¼Œå¹¿å¼ç»å…¸", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("å¥¶é»„åŒ…", 20, 30, 4, "é¦™ç”œå¯å£ï¼Œæ—©é¤ä¼˜é€‰", ["æ™´å¤©", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("è±†æ²™åŒ…", 20, 30, 5, "ä¼ ç»Ÿç”œç‚¹ï¼Œè¥å…»ä¸°å¯Œ", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            
            # æ–°å¢é£Ÿç‰© - ç”œå“é¥®å“
            FoodOption("åŒçš®å¥¶", 20, 30, 6, "æ»‘å«©é¦™ç”œï¼Œå¹¿å¼ç”œå“", ["æ™´å¤©", "ç‚çƒ­", "å¤å­£"]),
            FoodOption("æ¨æç”˜éœ²", 25, 35, 7, "æ¸…çˆ½è§£æš‘ï¼Œæ¸¯å¼ç”œå“", ["æ™´å¤©", "ç‚çƒ­", "å¤å­£"]),
            FoodOption("çº¢è±†æ²™", 20, 30, 7, "ä¼ ç»Ÿç”œå“ï¼Œè¥å…»ä¸°å¯Œ", ["é˜´å¤©", "é›¨å¤©", "ç§‹å­£", "å†¬å­£"]),
            FoodOption("ç»¿è±†æ±¤", 20, 30, 8, "æ¸…çƒ­è§£æš‘ï¼Œå¤å­£å¿…å¤‡", ["æ™´å¤©", "ç‚çƒ­", "å¤å­£"]),
            FoodOption("é“¶è€³è²å­æ±¤", 20, 30, 8, "æ»‹è¡¥å…»ç”Ÿï¼Œç¾å®¹å…»é¢œ", ["é˜´å¤©", "é›¨å¤©", "ç§‹å­£", "å†¬å­£"]),
            FoodOption("å†°ç³–é›ªæ¢¨", 20, 30, 8, "æ¶¦è‚ºæ­¢å’³ï¼Œç§‹å­£ä½³å“", ["é˜´å¤©", "é›¨å¤©", "ç§‹å­£"]),
            
            # æ–°å¢é£Ÿç‰© - ç´ é£Ÿç±»
            FoodOption("ç´ ç‚’ä¸‰ä¸", 20, 30, 8, "è”¬èœä¸°å¯Œï¼Œè¥å…»å‡è¡¡", ["æ™´å¤©", "ç‚çƒ­", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("ç´ ç‚’è±†èŠ½", 20, 30, 8, "æ¸…è„†çˆ½å£ï¼Œç»´ç”Ÿç´ ä¸°å¯Œ", ["æ™´å¤©", "ç‚çƒ­", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("ç´ ç‚’é’èœ", 20, 30, 9, "æ¸…æ·¡çˆ½å£ï¼Œçº¤ç»´ä¸°å¯Œ", ["æ™´å¤©", "ç‚çƒ­", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("ç´ ç‚’èŒ„å­", 20, 30, 7, "è½¯ç³¯å¯å£ï¼Œè¥å…»ä¸°å¯Œ", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("ç´ ç‚’è±†è…", 20, 30, 8, "æ¤ç‰©è›‹ç™½ï¼Œä½è„‚å¥åº·", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("ç´ ç‚’è˜‘è‡", 25, 35, 8, "èŒç±»è¥å…»ï¼Œå£æ„Ÿä¸°å¯Œ", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            
            # æ–°å¢é£Ÿç‰© - ç‰¹è‰²èœç³»
            FoodOption("ç™½åˆ‡é¸¡", 30, 40, 8, "æ¸…æ·¡é²œç¾ï¼Œç²¤å¼ç»å…¸", ["æ™´å¤©", "æ˜¥å­£", "å¤å­£"]),
            FoodOption("å£æ°´é¸¡", 25, 35, 6, "éº»è¾£é²œé¦™ï¼Œå·å¼ç»å…¸", ["é˜´å¤©", "é›¨å¤©", "ç§‹å­£", "å†¬å­£"]),
            FoodOption("å«èŠ±é¸¡", 30, 40, 7, "é¦™æ°”å››æº¢ï¼Œæ±Ÿå—ç‰¹è‰²", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("ç›ç„—é¸¡", 30, 40, 7, "å’¸é¦™å¯å£ï¼Œå®¢å®¶ç‰¹è‰²", ["æ™´å¤©", "æ˜¥å­£", "ç§‹å­£"]),
            FoodOption("è¾£å­é¸¡", 25, 35, 5, "éº»è¾£é²œé¦™ï¼Œå·å¼ç»å…¸", ["é˜´å¤©", "é›¨å¤©", "ç§‹å­£", "å†¬å­£"]),
            FoodOption("é»„ç„–é¸¡", 25, 35, 6, "è½¯çƒ‚å…¥å‘³ï¼Œè¥å…»ä¸°å¯Œ", ["é˜´å¤©", "é›¨å¤©", "ç§‹å­£", "å†¬å­£"])
        ]

def read_recent_foods():
    if not os.path.exists(RECENT_FILE):
        return []
    with open(RECENT_FILE, 'r', encoding='utf-8') as f:
        return [line.strip() for line in f if line.strip()]

def add_recent_food(food_name):
    foods = read_recent_foods()
    foods.append(food_name)
    # åªä¿ç•™æœ€è¿‘7å¤©çš„è®°å½•
    foods = foods[-7:]
    with open(RECENT_FILE, 'w', encoding='utf-8') as f:
        for food in foods:
            f.write(food + '\n')

def clear_recent_foods():
    if os.path.exists(RECENT_FILE):
        os.remove(RECENT_FILE)

def show_recent_foods():
    foods = read_recent_foods()
    if not foods:
        logging.info("\nè¿‘æœŸæœªå½•å…¥ä»»ä½•é£Ÿå“ã€‚\n")
    else:
        logging.info("\nä½ æœ€è¿‘åƒè¿‡çš„é£Ÿå“æœ‰ï¼š")
        for food in foods:
            logging.info("-", food)
        logging.info()

def get_food_recommendation():
    food_options = get_food_options()
    logging.info("\n=== ä»Šå¤©åƒä»€ä¹ˆï¼Ÿè®©æˆ‘å¸®ä½ å†³å®šï¼===\n")
    # è·å–å¤©æ°”ç±»å‹
    weather_types = ["æ™´å¤©", "é›¨å¤©", "ç‚çƒ­", "å¯’å†·"]
    logging.info("å¤©æ°”ç±»å‹å¯é€‰ï¼š", ", ".join(weather_types))
    while True:
        weather = input("è¯·è¾“å…¥å½“å‰å¤©æ°”ç±»å‹: ")
        if weather in weather_types:
            break
        logging.warning("è¯·è¾“å…¥æœ‰æ•ˆçš„å¤©æ°”ç±»å‹ï¼")
    # è·å–ç”¨æˆ·é¢„ç®—
    while True:
        try:
            budget = float(input("è¯·è¾“å…¥æ‚¨çš„é¢„ç®—ï¼ˆå…ƒï¼‰: "))
            if budget > 0:
                break
            logging.warning("é¢„ç®—å¿…é¡»å¤§äº0å…ƒ")
        except ValueError:
            logging.warning("è¯·è¾“å…¥æœ‰æ•ˆçš„æ•°å­—")
    # è·å–æœ€ä½å¥åº·åº¦è¦æ±‚
    logging.info("å¥åº·åº¦è¯„åˆ†è¯´æ˜ï¼š")
    logging.info("1-2ï¼šé«˜çƒ­é‡ã€é«˜æ²¹è„‚ã€é‡å£å‘³ï¼ˆå¦‚ç‚¸é¸¡ã€å¿«é¤ï¼‰")
    logging.info("3-4ï¼šä¸€èˆ¬å¿«é¤ã€é‡å£å‘³ã€æ²¹è„‚åé«˜")
    logging.info("5-6ï¼šæ™®é€šå®¶å¸¸èœã€ä¸»é£Ÿæ­é…ï¼Œè¥å…»é€‚ä¸­")
    logging.info("7-8ï¼šæ¸…æ·¡ã€è¤ç´ æ­é…ã€è›‹ç™½è´¨ä¸°å¯Œ")
    logging.info("9-10ï¼šé«˜çº¤ç»´ã€ä½è„‚è‚ªã€è”¬èœæ°´æœã€å¥èº«é¤")
    while True:
        try:
            min_health = int(input("è¯·è¾“å…¥æœ€ä½å¥åº·åº¦è¦æ±‚ï¼ˆ1-10ï¼‰ï¼š"))
            if 1 <= min_health <= 10:
                break
            logging.warning("å¥åº·åº¦å¿…é¡»åœ¨1-10ä¹‹é—´")
        except ValueError:
            logging.warning("è¯·è¾“å…¥æœ‰æ•ˆçš„æ•°å­—")
    # è¯»å–è¿‘æœŸé¥®é£Ÿ
    recent_foods = set(read_recent_foods())
    # ç­›é€‰ç¬¦åˆæ¡ä»¶çš„é£Ÿç‰©
    suitable_options = [
        food for food in food_options
        if food.min_price <= budget and food.health_rating >= min_health and food.name not in recent_foods
    ]
    # æ ¹æ®å¤©æ°”ä¼˜å…ˆç­›é€‰
    weather_options = [food for food in suitable_options if weather in food.tags]
    if weather_options:
        suitable_options = weather_options
    if not suitable_options:
        logging.warning("\næŠ±æ­‰ï¼Œæ²¡æœ‰æ‰¾åˆ°ç¬¦åˆæ‚¨è¦æ±‚çš„é£Ÿç‰©ã€‚è¯·è°ƒæ•´é¢„ç®—æˆ–å¥åº·åº¦è¦æ±‚ï¼Œæˆ–æ¸…ç©ºè¿‘æœŸé¥®é£Ÿè®°å½•ã€‚")
        return None
    logging.info("\næ€è€ƒä¸­", end="")
    for _ in range(3):
        time.sleep(0.5)
        logging.info(".", end="", flush=True)
    recommendation = random.choice(suitable_options)
    logging.info(f"\n\nä»Šå¤©æ¨èæ‚¨åƒ: {recommendation.name}! ğŸ˜‹")
    logging.info(f"é¢„è®¡ä»·æ ¼èŒƒå›´: Â¥{recommendation.min_price}-{recommendation.max_price}")
    logging.info(f"å¥åº·åº¦è¯„åˆ†: {'ğŸ' * recommendation.health_rating}{'â­' * (10-recommendation.health_rating)}")
    logging.info(f"æ¨èç†ç”±: {recommendation.description}")
    logging.info(f"é€‚åˆå¤©æ°”: {', '.join(recommendation.tags)}\n")
    add_recent_food(recommendation.name)
    return recommendation

def guess_you_like():
    food_options = get_food_options()
    food = random.choice(food_options)
    logging.info("\n=== çŒœä½ ä»Šå¤©ä¼šå–œæ¬¢ ===\n")
    logging.info(f"{food.name}  (é¢„è®¡ä»·æ ¼: Â¥{food.min_price}-{food.max_price})")
    logging.info(f"å¥åº·åº¦è¯„åˆ†: {'ğŸ' * food.health_rating}{'â­' * (10-food.health_rating)}")
    logging.info(f"æ¨èç†ç”±: {food.description}")
    logging.info(f"é€‚åˆå¤©æ°”: {', '.join(food.tags)}\n")

def main():
    while True:
        logging.info("\nä¸»èœå•ï¼š\n1. æ¨èä»Šå¤©åƒä»€ä¹ˆ\n2. å½•å…¥ä»Šå¤©å·²åƒé£Ÿå“\n3. æŸ¥çœ‹è¿‘æœŸé¥®é£Ÿè®°å½•\n4. æ¸…ç©ºè¿‘æœŸé¥®é£Ÿè®°å½•\n5. çŒœä½ å–œæ¬¢\n6. é€€å‡º\n")
        choice = input("è¯·é€‰æ‹©åŠŸèƒ½ï¼ˆ1-6ï¼‰ï¼š")
        if choice == '1':
            get_food_recommendation()
        elif choice == '2':
            food = input("è¯·è¾“å…¥ä½ ä»Šå¤©å·²åƒçš„é£Ÿå“åç§°ï¼š").strip()
            if food:
                add_recent_food(food)
                logging.info("å·²å½•å…¥ã€‚\n")
        elif choice == '3':
            show_recent_foods()
        elif choice == '4':
            clear_recent_foods()
            logging.info("å·²æ¸…ç©ºè¿‘æœŸé¥®é£Ÿè®°å½•ã€‚\n")
        elif choice == '5':
            guess_you_like()
        elif choice == '6':
            logging.info("\nç¥æ‚¨ç”¨é¤æ„‰å¿«ï¼ğŸ‘‹\n")
            break
        else:
            logging.warning("æ— æ•ˆé€‰æ‹©ï¼Œè¯·é‡æ–°è¾“å…¥ã€‚\n")

if __name__ == "__main__":
    main()